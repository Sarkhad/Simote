<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
	<title th:text="#{page.editor.title}"></title>

	<th:block th:include="template :: head"></th:block>

	<link rel="stylesheet"  th:src="@{~/css/editor/ng-tags-input.min.css}">
	<link rel="stylesheet"  th:src="@{~/css/editor/ng-tags-input.bootstrap.min.css}">
</head>
<body data-ng-app="editor" data-ng-controller="editorController">
	<th:block th:replace="template :: navbar"></th:block>
{{creative}}
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<th:block
					th:replace="template :: header( title=#{page.editor.header.title}, description=#{page.editor.header.description} )"></th:block>
			</div>
		</div>
		<div class="row">
			<div class="col-md-4">
				<div class="panel panel-default">
					<div class="panel-body">
						<form th:action="@{''}" name="creativeForm" method="post">
							<div class="form-group">
								<label for="creativeName" th:text="#{page.editor.form.creativename}"></label> <input
									type="text" required="required" class="form-control" data-ng-model="creative.name"
									th:placeholder="#{page.editor.form.creativename.placeholder}">
							</div>
							<div class="form-group">
								<label>Tags</label>
								<tags-input ng-model="creative.tags">
        							<auto-complete source="loadTags($query)"></auto-complete>
    							</tags-input>
							</div>
							<div class="form-group">
								<label th:text="#{page.editor.form.description.label}" for="description"></label> <input type="text"
									class="form-control" id="description" for="creativeForm" required data-ng-model="creative.description" th:placeholder="#{page.editor.form.description.placeholder}">
							</div>
							<input type="hidden" name="creative" value="{{creative}}"></input>
							<button th:text="#{page.editor.form.postcreative}" style="width:100%;" type="submit" class="btn btn-success" ></button>
						</form>
					</div>
				</div>
			</div>
			<div
				class="col-md-7 col-md-offset-1">
				<div class="row" data-ng-repeat="chapter in chapters">
					{{chapter}}
					<div th:inline="text" class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">
								<span class="label label-success">[[#{page.editor.chapter.title}]] {{chapter.id}}</span><span
									data-ng-click="removeChapter(chapter.id)" th:title="#{page.editor.chapter.removechapter}"
									class="glyphicon glyphicon-remove pull-right"
									aria-hidden="true"></span>
							</h3>
						</div>
						<div class="panel-body">
							<div class="form-group">
								<label>Chapter title</label>
   						  		<input  for="creativeForm" required type="text" class="form-control" ng-model="chapter.title" placeholder="Just a title">	
							</div>
							<div class="form-group">
								<label>Tags</label>
								<tags-input for="creativeForm" ng-model="chapter.tags">
        							<auto-complete source="loadTags($query)"></auto-complete>
    							</tags-input>
							</div>
							<hr>
							<h4 class="text-center"><strong>Preview</strong></h4>
							<p sd-model-to-html="chapter.content">{{preview + chapter.id}}</p>
						</div>
						<div class="panel-footer">
							<h4 class="text-center"><strong>Editor</strong></h4>
							<textarea required ng-model="chapter.content" class="form-control animate msd-elastic: \n;"></textarea>
						</div>
					</div>
				</div>
				{{chapter.content}}
				<div class="row">
					<button type="submit" data-ng-click="addChapter()"
						class="btn btn-primary pull-right" th:text="#{page.editor.addchapter}"></button>
				</div>
				
			</div>

		</div>
	</div>
<a type="submit" data-ng-click="testPost()" class="btn btn-primary pull-right" >Test POST</a>
	<th:block th:replace="template :: footer"></th:block>

	<th:block th:replace="template :: scripts"></th:block>
	
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-sanitize.js"></script>
	<script type="text/javascript" th:src="@{~/js/editor/ng-tags-input.min.js}"></script>
	<script th:src="@{~/js/editor/elastic.js}"></script>
	<script th:src="@{~/js/editor/showdown.min.js}"></script>
	<script th:src="@{~/js/editor/ng-showdown.min.js}"></script>
	<script th:src="@{~/js/editor/editor.js}"></script>
	<script th:src="@{~/js/bootstrap-markdown.js}"></script>
</body>
</html>